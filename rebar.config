{erl_opts,
	[native, {hipe, o3}, debug_info, fail_on_warning, warnings_as_errors, {d, 'VSN'}]
}.
{deps, [
  {unit_testing,
    {git, "https://github.com/ruanpienaar/unit_testing", {branch, "master"}}},
  {coveralls,
      {git, "https://github.com/markusn/coveralls-erl", {branch, "master"}}}
]}.

{require_otp_vsn, "17.*|18.*|19.*|20.*"}.
{edoc_opts, [{doclet, edown_doclet}]}.
{eunit_opts, [
	verbose,
	{report,{eunit_surefire,[{dir,"."}]}},
	{report, {eunit_progress, [colored, profile]}}
]}.
{eunit_compile_opts, [{i, "../"}]}.

{plugins, [
    {coveralls, {git, "https://github.com/markusn/coveralls-erl", "master"}},
    rebar3_proper
]}.

{cover_enabled, true}.
{cover_export_enabled, true}.
{coveralls_coverdata, "_build/test/cover/eunit.coverdata"}. % or a list of files
{coveralls_service_name , "travis-ci"}.

{profiles,
    [{test, [
        {deps, [{proper, "1.2.0"}, recon]}
        ]}
    ]
}.

%% == xref ==

{xref_warnings, true}.

%% optional extra paths to include in xref:set_library_path/2.
%% specified relative location of rebar.config.
%% e.g. {xref_extra_paths,["../gtknode/src"]}
%% {xref_extra_paths,[]}.

%% xref checks to run
{xref_checks, [ undefined_function_calls,
                undefined_functions,
                locals_not_used,
                % exports_not_used,
                deprecated_function_calls,
                deprecated_functions
              ]}.

%% Optional custom xref queries (xref manual has details) specified as
%%     {xref_queries, [{query_string(), expected_query_result()},...]}
%% The following for example removes all references to mod:*foo/4
%% functions from undefined external function calls as those are in a
%% generated module
%%{xref_queries,
%% [{"(XC - UC) || (XU - X - B"
%%   " - (\"mod\":\".*foo\"/\"4\"))",[]}]}.